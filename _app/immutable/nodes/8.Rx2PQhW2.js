import{s as os,d as is,n as pr,r as ls,o as cs,e as ot}from"../chunks/scheduler.tir__IPy.js";import{S as us,i as fs,e as y,s as L,b as K,c as b,d as B,m as H,h as D,f as X,g as A,n as g,j as se,k as c,p as ds,q as Ke,o as vr}from"../chunks/index.bU9Y8Vjw.js";import{e as Xe}from"../chunks/each.-gASlQSi.js";import{n as hs}from"../chunks/transform.Cz5Y6iUM.js";import{F as ps,G as Tn,H as vs,I as ms,C as $e,J as Hr,K as tn,b as ae,L as qn,M as Ve,N as gs,O as ys,P as bs,c as Be,a as Pe,d as we,Q as _s,p as Ge,e as jn,R as Cs,S as mr,T as gr,U as Rr,V as ws,W as Nr,X as xe,Y as rn,m as Sr,Z as xs,_ as Sn,$ as ks,g as Fr,h as en,a0 as Ms,a1 as Es,a2 as Ls,a3 as yr,a4 as Ds,a5 as As,a6 as Or,a7 as nn,a8 as Ur,f as zs,a9 as Ts,r as qr,aa as jr,x as Wr,ab as ft,ac as Is,ad as Vs,ae as Bs,af as Yr,ag as Ps,ah as Hs,w as Zr,ai as Kr,aj as Rs,ak as Xr,k as Ie,l as Ns,n as Ss,al as Fs,i as rt,am as Os,an as Us,j as In,s as St,q as br,ao as _r}from"../chunks/index.DHG4JIsl.js";import{M as qs,g as js}from"../chunks/map.Cp5HnIKx.js";import{b as Fn,S as On,a as Cr,M as st,T as Vn,V as Ws,A as Te,c as Ys,C as Zs,d as Bn}from"../chunks/globals.CkVBXOP0.js";import{t as Ks,A as Xs,f as Gr,m as Gs,c as wr,s as Qs,g as Js,e as re,h as $s,a as Qe,d as Pn,b as xr}from"../chunks/bar.B1Wzq4TR.js";const ta=ea(na);function ea(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:a,width:s,height:i}=e;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((i=Math.floor(i!==void 0?i:a.length/s))>=0))throw new RangeError("invalid height");if(!s||!i||!n&&!r)return e;const u=n&&t(n),f=r&&t(r),l=a.slice();return u&&f?(be(u,l,a,s,i),be(u,a,l,s,i),be(u,l,a,s,i),_e(f,a,l,s,i),_e(f,l,a,s,i),_e(f,a,l,s,i)):u?(be(u,a,l,s,i),be(u,l,a,s,i),be(u,a,l,s,i)):f&&(_e(f,a,l,s,i),_e(f,l,a,s,i),_e(f,a,l,s,i)),e}}function be(t,e,n,r,a){for(let s=0,i=r*a;s<i;)t(e,n,s,s+=r,1)}function _e(t,e,n,r,a){for(let s=0,i=r*a;s<r;++s)t(e,n,s,s+i,r)}function na(t){const e=Math.floor(t);if(e===t)return ra(t);const n=t-e,r=2*t+1;return(a,s,i,u,f)=>{if(!((u-=f)>=i))return;let l=e*s[i];const o=f*e,v=o+f;for(let p=i,d=i+o;p<d;p+=f)l+=s[Math.min(u,p)];for(let p=i,d=u;p<=d;p+=f)l+=s[Math.min(u,p+o)],a[p]=(l+n*(s[Math.max(i,p-v)]+s[Math.min(u,p+v)]))/r,l-=s[Math.max(i,p-o)]}}function ra(t){const e=2*t+1;return(n,r,a,s,i)=>{if(!((s-=i)>=a))return;let u=t*r[a];const f=i*t;for(let l=a,o=a+f;l<o;l+=i)u+=r[Math.min(s,l)];for(let l=a,o=s;l<=o;l+=i)u+=r[Math.min(s,l+f)],n[l]=u/e,u-=r[Math.max(a,l-f)]}}function sa(t,e,n){let r;for(;;){const a=ps(t,e,n);if(a===r||a===0||!isFinite(a))return[t,e];a>0?(t=Math.floor(t/a)*a,e=Math.ceil(e/a)*a):a<0&&(t=Math.ceil(t*a)/a,e=Math.floor(e*a)/a),r=a}}function Qr(t,e=Tn){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=Tn);const a=(u,f)=>e(n[u],n[f]);let s,i;return t=Uint32Array.from(n,(u,f)=>f),t.sort(e===Tn?(u,f)=>vs(n[u],n[f]):ms(a)),t.forEach((u,f)=>{const l=a(u,s===void 0?u:s);l>=0?((s===void 0||l>0)&&(s=u,i=f),r[u]=i):r[u]=NaN}),r}var aa=Array.prototype,Jr=aa.slice;function oa(t,e){return t-e}function ia(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}const Ft=t=>()=>t;function la(t,e){for(var n=-1,r=e.length,a;++n<r;)if(a=ca(t,e[n]))return a;return 0}function ca(t,e){for(var n=e[0],r=e[1],a=-1,s=0,i=t.length,u=i-1;s<i;u=s++){var f=t[s],l=f[0],o=f[1],v=t[u],p=v[0],d=v[1];if(ua(f,v,e))return 0;o>r!=d>r&&n<(p-l)*(r-o)/(d-o)+l&&(a=-a)}return a}function ua(t,e,n){var r;return fa(t,e,n)&&da(t[r=+(t[0]===e[0])],n[r],e[r])}function fa(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function da(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function ha(){}var kt=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function kr(){var t=1,e=1,n=Ks,r=f;function a(l){var o=n(l);if(Array.isArray(o))o=o.slice().sort(oa);else{const v=$e(l,pa);for(o=Hr(...sa(v[0],v[1],o),o);o[o.length-1]>=v[1];)o.pop();for(;o[1]<v[0];)o.shift()}return o.map(v=>s(l,v))}function s(l,o){const v=o==null?NaN:+o;if(isNaN(v))throw new Error(`invalid value: ${o}`);var p=[],d=[];return i(l,v,function(w){r(w,l,v),ia(w)>0?p.push([w]):d.push(w)}),d.forEach(function(w){for(var E=0,k=p.length,_;E<k;++E)if(la((_=p[E])[0],w)!==-1){_.push(w);return}}),{type:"MultiPolygon",value:o,coordinates:p}}function i(l,o,v){var p=new Array,d=new Array,w,E,k,_,h,x;for(w=E=-1,_=ne(l[0],o),kt[_<<1].forEach(z);++w<t-1;)k=_,_=ne(l[w+1],o),kt[k|_<<1].forEach(z);for(kt[_<<0].forEach(z);++E<e-1;){for(w=-1,_=ne(l[E*t+t],o),h=ne(l[E*t],o),kt[_<<1|h<<2].forEach(z);++w<t-1;)k=_,_=ne(l[E*t+t+w+1],o),x=h,h=ne(l[E*t+w+1],o),kt[k|_<<1|h<<2|x<<3].forEach(z);kt[_|h<<3].forEach(z)}for(w=-1,h=l[E*t]>=o,kt[h<<2].forEach(z);++w<t-1;)x=h,h=ne(l[E*t+w+1],o),kt[h<<2|x<<3].forEach(z);kt[h<<3].forEach(z);function z(V){var C=[V[0][0]+w,V[0][1]+E],T=[V[1][0]+w,V[1][1]+E],U=u(C),O=u(T),M,S;(M=d[U])?(S=p[O])?(delete d[M.end],delete p[S.start],M===S?(M.ring.push(T),v(M.ring)):p[M.start]=d[S.end]={start:M.start,end:S.end,ring:M.ring.concat(S.ring)}):(delete d[M.end],M.ring.push(T),d[M.end=O]=M):(M=p[O])?(S=d[U])?(delete p[M.start],delete d[S.end],M===S?(M.ring.push(T),v(M.ring)):p[S.start]=d[M.end]={start:S.start,end:M.end,ring:S.ring.concat(M.ring)}):(delete p[M.start],M.ring.unshift(C),p[M.start=U]=M):p[U]=d[O]={start:U,end:O,ring:[C,T]}}}function u(l){return l[0]*2+l[1]*(t+1)*4}function f(l,o,v){l.forEach(function(p){var d=p[0],w=p[1],E=d|0,k=w|0,_=Hn(o[k*t+E]);d>0&&d<t&&E===d&&(p[0]=Mr(d,Hn(o[k*t+E-1]),_,v)),w>0&&w<e&&k===w&&(p[1]=Mr(w,Hn(o[(k-1)*t+E]),_,v))})}return a.contour=s,a.size=function(l){if(!arguments.length)return[t,e];var o=Math.floor(l[0]),v=Math.floor(l[1]);if(!(o>=0&&v>=0))throw new Error("invalid size");return t=o,e=v,a},a.thresholds=function(l){return arguments.length?(n=typeof l=="function"?l:Array.isArray(l)?Ft(Jr.call(l)):Ft(l),a):n},a.smooth=function(l){return arguments.length?(r=l?f:ha,a):r===f},a}function pa(t){return isFinite(t)?t:NaN}function ne(t,e){return t==null?!1:+t>=e}function Hn(t){return t==null||isNaN(t=+t)?-1/0:t}function Mr(t,e,n,r){const a=r-e,s=n-e,i=isFinite(a)||isFinite(s)?a/s:Math.sign(a)/Math.sign(s);return isNaN(i)?t:t+i-.5}function va(t){return t[0]}function ma(t){return t[1]}function ga(){return 1}function ya(){var t=va,e=ma,n=ga,r=960,a=500,s=20,i=2,u=s*3,f=r+u*2>>i,l=a+u*2>>i,o=Ft(20);function v(h){var x=new Float32Array(f*l),z=Math.pow(2,-i),V=-1;for(const P of h){var C=(t(P,++V,h)+u)*z,T=(e(P,V,h)+u)*z,U=+n(P,V,h);if(U&&C>=0&&C<f&&T>=0&&T<l){var O=Math.floor(C),M=Math.floor(T),S=C-O-.5,R=T-M-.5;x[O+M*f]+=(1-S)*(1-R)*U,x[O+1+M*f]+=S*(1-R)*U,x[O+1+(M+1)*f]+=S*R*U,x[O+(M+1)*f]+=(1-S)*R*U}}return ta({data:x,width:f,height:l},s*z),x}function p(h){var x=v(h),z=o(x),V=Math.pow(2,2*i);return Array.isArray(z)||(z=Hr(Number.MIN_VALUE,tn(x)/V,z)),kr().size([f,l]).thresholds(z.map(C=>C*V))(x).map((C,T)=>(C.value=+z[T],d(C)))}p.contours=function(h){var x=v(h),z=kr().size([f,l]),V=Math.pow(2,2*i),C=T=>{T=+T;var U=d(z.contour(x,T*V));return U.value=T,U};return Object.defineProperty(C,"max",{get:()=>tn(x)/V}),C};function d(h){return h.coordinates.forEach(w),h}function w(h){h.forEach(E)}function E(h){h.forEach(k)}function k(h){h[0]=h[0]*Math.pow(2,i)-u,h[1]=h[1]*Math.pow(2,i)-u}function _(){return u=s*3,f=r+u*2>>i,l=a+u*2>>i,p}return p.x=function(h){return arguments.length?(t=typeof h=="function"?h:Ft(+h),p):t},p.y=function(h){return arguments.length?(e=typeof h=="function"?h:Ft(+h),p):e},p.weight=function(h){return arguments.length?(n=typeof h=="function"?h:Ft(+h),p):n},p.size=function(h){if(!arguments.length)return[r,a];var x=+h[0],z=+h[1];if(!(x>=0&&z>=0))throw new Error("invalid size");return r=x,a=z,_()},p.cellSize=function(h){if(!arguments.length)return 1<<i;if(!((h=+h)>=1))throw new Error("invalid cell size");return i=Math.floor(Math.log(h)/Math.LN2),_()},p.thresholds=function(h){return arguments.length?(o=typeof h=="function"?h:Array.isArray(h)?Ft(Jr.call(h)):Ft(h),p):o},p.bandwidth=function(h){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((h=+h)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*h*h+1)-1)/2,_()},p}const ba={ariaLabel:"cell"};class _a extends Xs{constructor(e,{x:n,y:r,...a}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},a,ba)}_transform(e,n){e.call(ae,n,{},0,0)}}function Je(t,{x:e,y:n,...r}={}){return[e,n]=qn(e,n),new _a(t,{...r,x:e,y:n})}const Ca={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function wa(t){return t.sort===void 0&&t.reverse===void 0?Cs({channel:"-r"},t):t}class xa extends Ve{constructor(e,n={}){const{x:r,y:a,r:s,rotate:i,symbol:u=mr,frameAnchor:f}=n,[l,o]=gr(i,0),[v,p]=gs(u),[d,w]=gr(s,v==null?3:4.5);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:a,scale:"y",optional:!0},r:{value:d,scale:"r",filter:ys,optional:!0},rotate:{value:l,optional:!0},symbol:{value:v,scale:"auto",optional:!0}},wa(n),Ca),this.r=w,this.rotate=o,this.symbol=p,this.frameAnchor=bs(f);const{channels:E}=this,{symbol:k}=E;if(k){const{fill:_,stroke:h}=E;k.hint={fill:_?_.value===k.value?"color":"currentColor":this.fill??"currentColor",stroke:h?h.value===k.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,r,a,s){const{x:i,y:u}=n,{x:f,y:l,r:o,rotate:v,symbol:p}=r,{r:d,rotate:w,symbol:E}=this,[k,_]=Rr(this,a),h=E===mr,x=o?void 0:d*d*Math.PI;return ws(d)&&(e=[]),Be("svg:g",s).call(Pe,this,a,s).call(ae,this,{x:f&&i,y:l&&u}).call(z=>z.selectAll().data(e).enter().append(h?"circle":"path").call(we,this).call(h?V=>{V.attr("cx",f?C=>f[C]:k).attr("cy",l?C=>l[C]:_).attr("r",o?C=>o[C]:d)}:V=>{V.attr("transform",_s`translate(${f?C=>f[C]:k},${l?C=>l[C]:_})${v?C=>` rotate(${v[C]})`:w?` rotate(${w})`:""}`).attr("d",o&&p?C=>{const T=Ge();return p[C].draw(T,o[C]*o[C]*Math.PI),T}:o?C=>{const T=Ge();return E.draw(T,o[C]*o[C]*Math.PI),T}:p?C=>{const T=Ge();return p[C].draw(T,x),T}:(()=>{const C=Ge();return E.draw(C,x),C})())}).call(jn,this,r)).node()}}function $r(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=qn(e,n)),new xa(t,{...r,x:e,y:n})}const ka={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Ma extends Ve{constructor(e,n={}){const{x:r,y:a,z:s,curve:i,tension:u}=n;super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y"},z:{value:rn(n),optional:!0}},n,ka),this.z=s,this.curve=Gs(i,u),Sr(this,n)}filter(e){return e}project(e,n,r){this.curve!==wr&&super.project(e,n,r)}render(e,n,r,a,s){const{x:i,y:u}=r,{curve:f}=this;return Be("svg:g",s).call(Pe,this,a,s).call(ae,this,n).call(l=>l.selectAll().data(xs(e,[i,u],this,r)).enter().append("path").call(we,this).call(Sn,this,r).call(ks,this,r,s).attr("d",f===wr&&s.projection?Ea(s.projection,i,u):Qs().curve(f).defined(o=>o>=0).x(o=>i[o]).y(o=>u[o]))).node()}}function Ea(t,e,n){const r=Fr(t);return e=en(e),n=en(n),a=>{let s=[];const i=[s];for(const u of a)u===-1?(s=[],i.push(s)):s.push([e[u],n[u]]);return r({type:"MultiLineString",coordinates:i})}}function La(t,{x:e=Nr,y:n=xe,...r}={}){return new Ma(t,Gr({...r,x:e,y:n}))}function Da(t,e={}){let{y:n,y1:r,y2:a}=e;n===void 0&&r===void 0&&a===void 0&&(e={...e,y:n=xe});const s={};return n!=null&&(s.y=t),r!=null&&(s.y1=t),a!=null&&(s.y2=t),ts(s,e)}function ts(t={},e={}){const n=rn(e),r=Object.entries(t).map(([a,s])=>{const i=Ms(a,e);if(i==null)throw new Error(`missing channel: ${a}`);const[u,f]=Es(i);return{key:a,input:i,output:u,setOutput:f,map:Aa(s)}});return{...Ls(e,(a,s)=>{const i=yr(a,n),u=r.map(({input:l})=>yr(a,l)),f=r.map(({setOutput:l})=>l(new Array(a.length)));for(const l of s)for(const o of i?Ds(l,v=>i[v]).values():[l])r.forEach(({map:v},p)=>v.mapIndex(o,u[p],f[p]));return{data:a,facets:s}}),...Object.fromEntries(r.map(({key:a,output:s})=>[a,s]))}}function Aa(t){if(t==null)throw new Error("missing map");if(typeof t.mapIndex=="function")return t;if(typeof t.map=="function"&&As(t))return za(t);if(typeof t=="function")return Rn(Or(t));switch(`${t}`.toLowerCase()){case"cumsum":return Ia;case"rank":return Rn((e,n)=>Qr(e,r=>n[r]));case"quantile":return Rn((e,n)=>Ta(e,r=>n[r]))}throw new Error(`invalid map: ${t}`)}function za(t){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:t.map.bind(t)}}function Ta(t,e){const n=Js(t,e)-1;return Qr(t,e).map(r=>r/n)}function Rn(t){return{mapIndex(e,n,r){const a=t(e,n);if(a.length!==e.length)throw new Error("map function returned a mismatched length");for(let s=0,i=e.length;s<i;++s)r[e[s]]=a[s]}}}const Ia={mapIndex(t,e,n){let r=0;for(const a of t)n[a]=r+=e[a]}},Va={ariaLabel:"tick",fill:null,stroke:"currentColor"};class es extends Ve{constructor(e,n,r){super(e,n,r,Va),Sr(this,r)}render(e,n,r,a,s){return Be("svg:g",s).call(Pe,this,a,s).call(this._transform,this,n).call(i=>i.selectAll().data(e).enter().append("line").call(we,this).attr("x1",this._x1(n,r,a)).attr("x2",this._x2(n,r,a)).attr("y1",this._y1(n,r,a)).attr("y2",this._y2(n,r,a)).call(jn,this,r).call(zs,this,r,s)).node()}}class Ba extends es{constructor(e,n={}){const{x:r,y:a,inset:s=0,insetTop:i=s,insetBottom:u=s}=n;super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y",type:"band",optional:!0}},n),this.insetTop=nn(i),this.insetBottom=nn(u)}_transform(e,n,{x:r}){e.call(ae,n,{x:r},Ur,0)}_x1(e,{x:n}){return r=>n[r]}_x2(e,{x:n}){return r=>n[r]}_y1({y:e},{y:n},{marginTop:r}){const{insetTop:a}=this;return n&&e?s=>n[s]+a:r+a}_y2({y:e},{y:n},{height:r,marginBottom:a}){const{insetBottom:s}=this;return n&&e?i=>n[i]+e.bandwidth()-s:r-a-s}}class Pa extends es{constructor(e,n={}){const{x:r,y:a,inset:s=0,insetRight:i=s,insetLeft:u=s}=n;super(e,{y:{value:a,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n),this.insetRight=nn(i),this.insetLeft=nn(u)}_transform(e,n,{y:r}){e.call(ae,n,{y:r},0,Ur)}_x1({x:e},{x:n},{marginLeft:r}){const{insetLeft:a}=this;return n&&e?s=>n[s]+a:r+a}_x2({x:e},{x:n},{width:r,marginRight:a}){const{insetRight:s}=this;return n&&e?i=>n[i]+e.bandwidth()-s:r-a-s}_y1(e,{y:n}){return r=>n[r]}_y2(e,{y:n}){return r=>n[r]}}function Nn(t,{x:e=xe,...n}={}){return new Ba(t,{...n,x:e})}function Un(t,{y:e=xe,...n}={}){return new Pa(t,{...n,y:e})}function Ha(t,{y:e=xe,x:n=null,r,fill:a="#ccc",fillOpacity:s,stroke:i="currentColor",strokeOpacity:u,strokeWidth:f=2,sort:l,...o}={}){const v=n!=null?ft:Is;return Ts(qr(t,v({y1:ns,y2:rs},{x:n,y:e,stroke:i,strokeOpacity:u,...o})),re(t,v({y1:"p25",y2:"p75"},{x:n,y:e,fill:a,fillOpacity:s,...o})),Un(t,v({y:"p50"},{x:n,y:e,stroke:i,strokeOpacity:u,strokeWidth:f,sort:l,...o})),$r(t,ts({y:Ra},{x:n,y:e,z:n,r,stroke:i,strokeOpacity:u,...o})))}function Ra(t){const e=ns(t),n=rs(t);return t.map(r=>r<e||r>n?r:NaN)}function ns(t){const e=ss(t)*2.5-as(t)*1.5;return jr(t,n=>n>=e?n:NaN)}function rs(t){const e=as(t)*2.5-ss(t)*1.5;return tn(t,n=>n<=e?n:NaN)}function ss(t){return Wr(t,.25)}function as(t){return Wr(t,.75)}const Na={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Sa extends Ve{constructor(e,{x:n,y:r,z:a,weight:s,fill:i,stroke:u,...f}={}){const l=Er(i)&&(i="currentColor",!0),o=Er(u)&&(u="currentColor",!0);super(e,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:rn({z:a,fill:i,stroke:u}),optional:!0},weight:{value:s,optional:!0}},Ua({...f,fill:i,stroke:u},l,o),Na),l&&(this.fill=void 0),o&&(this.stroke=void 0),this.z=a}filter(e){return e}render(e,n,r,a,s){const{contours:i}=r,u=Fr();return Be("svg:g",s).call(Pe,this,a,s).call(ae,this,{}).call(f=>f.selectAll().data(e).enter().append("path").call(we,this).call(jn,this,r).attr("d",l=>u(i[l]))).node()}}function Fa(t,{x:e,y:n,...r}={}){return[e,n]=qn(e,n),new Sa(t,{...r,x:e,y:n})}const Oa=new Set(["x","y","z","weight"]);function Ua(t,e,n){let{bandwidth:a,thresholds:s}=t;return a=a===void 0?20:+a,s=s===void 0?20:typeof s?.[Symbol.iterator]=="function"?en(s):+s,Vs(t,function(i,u,f,l,o,v){const p=f.weight?en(f.weight.value):null,d=f.z?.value,{z:w}=this,[E,k]=Rr(this,o),{width:_,height:h}=o,{x,y:z}=Bs(f,l,v),V=Object.fromEntries(Object.entries(f).filter(([P])=>!Oa.has(P)).map(([P,Y])=>[P,{...Y,value:[]}])),C=e&&[],T=n&&[],U=ya().x(x?P=>x[P]:E).y(z?P=>z[P]:k).weight(p?P=>p[P]:1).size([_,h]).bandwidth(a),O=[];for(const P of u){const Y=[];O.push(Y);for(const q of d?Yr(P,d,w):[P]){const tt=U.contours(q);Y.push([q,tt])}}let M=s;if(!(M instanceof Ps)){let P=0;for(const Y of O)for(const[,q]of Y){const tt=q.max;tt>P&&(P=tt)}M=Float64Array.from({length:s-1},(Y,q)=>P*100*(q+1)/s)}const S=[],R=[];for(const P of O){const Y=[];S.push(Y);for(const[q,tt]of P)for(const it of M){Y.push(R.length),R.push(tt(it/100)),C&&C.push(it),T&&T.push(it);for(const W in V)V[W].value.push(f[W].value[q[0]])}}return C&&C.push(0),T&&T.push(0),{data:i,facets:S,channels:{...V,...C&&{fill:{value:C,scale:"color"}},...T&&{stroke:{value:T,scale:"color"}},contours:{value:R}}}})}function Er(t){return/^density$/i.test(t)}function qa(t,e,n){var r=1e-8,a=e-1,s=n-1,i=0,u,f,l,o,v,p,d,w,E,k,_;if(t<=0)return 0;if(t>=1)return 1;for(e>=1&&n>=1?(l=t<.5?t:1-t,o=Math.sqrt(-2*Math.log(l)),d=(2.30753+o*.27061)/(1+o*(.99229+o*.04481))-o,t<.5&&(d=-d),w=(d*d-3)/6,E=2/(1/(2*e-1)+1/(2*n-1)),k=d*Math.sqrt(w+E)/E-(1/(2*n-1)-1/(2*e-1))*(w+5/6-2/(3*E)),d=e/(e+n*Math.exp(2*k))):(u=Math.log(e/(e+n)),f=Math.log(n/(e+n)),o=Math.exp(e*u)/e,v=Math.exp(n*f)/n,k=o+v,t<o/k?d=Math.pow(e*k*t,1/e):d=1-Math.pow(n*k*(1-t),1/n)),_=-Ce(e)-Ce(n)+Ce(e+n);i<10;i++){if(d===0||d===1)return d;if(p=ja(d,e,n)-t,o=Math.exp(a*Math.log(d)+s*Math.log(1-d)+_),v=p/o,d-=o=v/(1-.5*Math.min(1,v*(a/d-s/(1-d)))),d<=0&&(d=.5*(d+o)),d>=1&&(d=.5*(d+o+1)),Math.abs(o)<r*d&&i>0)break}return d}function ja(t,e,n){var r=t===0||t===1?0:Math.exp(Ce(e+n)-Ce(e)-Ce(n)+e*Math.log(t)+n*Math.log(1-t));return t<0||t>1?!1:t<(e+1)/(e+n+2)?r*Lr(t,e,n)/e:1-r*Lr(1-t,n,e)/n}function Lr(t,e,n){var r=1e-30,a=1,s=e+n,i=e+1,u=e-1,f=1,l=1-s*t/i,o,v,p,d;for(Math.abs(l)<r&&(l=r),l=1/l,d=l;a<=100&&(o=2*a,v=a*(n-a)*t/((u+o)*(e+o)),l=1+v*l,Math.abs(l)<r&&(l=r),f=1+v/f,Math.abs(f)<r&&(f=r),l=1/l,d*=l*f,v=-(e+a)*(s+a)*t/((e+o)*(i+o)),l=1+v*l,Math.abs(l)<r&&(l=r),f=1+v/f,Math.abs(f)<r&&(f=r),l=1/l,p=l*f,d*=p,!(Math.abs(p-1)<3e-7));a++);return d}function Ce(t){var e=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,a,s,i;for(i=(s=a=t)+5.5,i-=(a+.5)*Math.log(i);e<6;e++)r+=n[e]/++s;return Math.log(2.506628274631*r/a)-i}function Wa(t,e){var n=qa(2*Math.min(t,1-t),.5*e,.5);return n=Math.sqrt(e*(1-n)/n),t>.5?n:-n}const Ya={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Za extends Ve{constructor(e,n={}){const{x:r,y:a,z:s,ci:i=.95,precision:u=4}=n;if(super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y"},z:{value:rn(n),optional:!0}},n,Ya),this.z=s,this.ci=+i,this.precision=+u,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${i}`);if(!(this.precision>0))throw new Error(`invalid precision: ${u}`)}render(e,n,r,a,s){const{x:i,y:u,z:f}=r,{ci:l}=this;return Be("svg:g",s).call(Pe,this,a,s).call(ae,this,n).call(o=>o.selectAll().data(f?Yr(e,f,this.z):[e]).enter().call(v=>v.append("path").attr("fill","none").call(we,this).call(Sn,this,{...r,fill:null,fillOpacity:null}).attr("d",p=>this._renderLine(p,i,u)).call(l&&!Rs(this.fill)?p=>p.select(Ka).attr("stroke","none").call(we,this).call(Sn,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",d=>this._renderBand(d,i,u)):()=>{}))).node()}}function Ka(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(hs.svg,"path"),this)}class Xa extends Za{constructor(e,n){super(e,n)}_renderBand(e,n,r){const{ci:a,precision:s}=this,[i,u]=$e(e,o=>n[o]),f=Dr(e,n,r),l=Qa(e,n,r,(1-a)/2,f);return $s().x(o=>o).y0(o=>l(o,-1)).y1(o=>l(o,1))(Zr(i,u-s/2,s).concat(u))}_renderLine(e,n,r){const[a,s]=$e(e,u=>n[u]),i=Dr(e,n,r);return`M${a},${i(a)}L${s},${i(s)}`}}function Ga(t,{x:e=Nr,y:n=xe,stroke:r,fill:a=Hs(r)?"currentColor":r,...s}={}){return new Xa(t,Gr({...s,x:e,y:n,fill:a,stroke:r}))}function Dr(t,e,n){let r=0,a=0,s=0,i=0;for(const o of t){const v=e[o],p=n[o];r+=v,a+=p,s+=v*p,i+=v*v}const u=t.length,f=(u*s-r*a)/(u*i-r*r),l=(a-f*r)/u;return o=>f*o+l}function Qa(t,e,n,r,a){const s=Kr(t,o=>e[o])/t.length;let i=0,u=0;for(const o of t)i+=(e[o]-s)**2,u+=(n[o]-a(e[o]))**2;const f=Math.sqrt(u/(t.length-2)),l=Wa(r,t.length-2);return(o,v)=>{const p=a(o),d=f*Math.sqrt(1/t.length+(o-s)**2/i);return p+v*l*d}}function Ar(t,e){return arguments.length===1&&({basis:t,...e}=t),Da(Ja(t),e)}function Ja(t){if(t===void 0)return zr;if(typeof t=="function")return sn(Or(t));if(/^p\d{2}$/i.test(t))return ke(Fs(t));switch(`${t}`.toLowerCase()){case"deviation":return eo;case"first":return zr;case"last":return to;case"max":return no;case"mean":return ro;case"median":return so;case"min":return ao;case"sum":return oo;case"extent":return $a}throw new Error(`invalid basis: ${t}`)}function sn(t){return{mapIndex(e,n,r){const a=+t(e,n);for(const s of e)r[s]=n[s]===null?NaN:n[s]/a}}}function ke(t){return sn((e,n)=>t(e,r=>n[r]))}const $a={mapIndex(t,e,n){const[r,a]=$e(t,i=>e[i]),s=a-r;for(const i of t)n[i]=e[i]===null?NaN:(e[i]-r)/s}},zr=sn((t,e)=>{for(let n=0;n<t.length;++n){const r=e[t[n]];if(Xr(r))return r}}),to=sn((t,e)=>{for(let n=t.length-1;n>=0;--n){const r=e[t[n]];if(Xr(r))return r}}),eo={mapIndex(t,e,n){const r=Ie(t,s=>e[s]),a=Ns(t,s=>e[s]);for(const s of t)n[s]=e[s]===null?NaN:a?(e[s]-r)/a:0}},no=ke(tn),ro=ke(Ie),so=ke(Ss),ao=ke(jr),oo=ke(Kr),io=""+new URL("../assets/Truncatedaxis.B0X-Oi6z.png",import.meta.url).href,lo=""+new URL("../assets/(Can) contain overlapping visual marks.COyQpe2-.png",import.meta.url).href,co=""+new URL("../assets/Mouse Over.CFjZId9Z.png",import.meta.url).href,uo=""+new URL("../assets/Rounding.B9aYSzLs.png",import.meta.url).href,fo=""+new URL("../assets/Data normalized.CL6tJ0W5.png",import.meta.url).href,ho=""+new URL("../assets/Contains Multiple Data Sources.ChMgQfFP.png",import.meta.url).href,Tr=""+new URL("../assets/Contains modeled data.DkmqjOEl.png",import.meta.url).href,po=""+new URL("../assets/Binning applied.B1wzFhkQ.png",import.meta.url).href;function Ir(t,e,n){const r=t.slice();return r[47]=e[n],r[48]=e,r[49]=n,r}function Vr(t,e,n){const r=t.slice();return r[50]=e[n],r[51]=e,r[52]=n,r}function Br(t){let e,n,r,a,s,i,u,f,l,o,v,p=`<div class="badge-container"><img class="badge" src="${uo}"/></div>`,d=t[50],w;const E=()=>t[24](v,d),k=()=>t[24](null,d);return{c(){e=y("div"),n=y("h3"),r=K("Pathway: "),a=K(t[50]),s=L(),i=y("p"),u=K("Please refer to CCC website on definitions of "),f=K(t[50]),l=K("."),o=L(),v=y("div"),v.innerHTML=p,w=L(),this.h()},l(_){e=b(_,"DIV",{class:!0});var h=B(e);n=b(h,"H3",{class:!0});var x=B(n);r=X(x,"Pathway: "),a=X(x,t[50]),x.forEach(A),s=D(h),i=b(h,"P",{class:!0});var z=B(i);u=X(z,"Please refer to CCC website on definitions of "),f=X(z,t[50]),l=X(z,"."),z.forEach(A),o=D(h),v=b(h,"DIV",{class:!0,"data-svelte-h":!0}),H(v)!=="svelte-mop3d7"&&(v.innerHTML=p),w=D(h),h.forEach(A),this.h()},h(){g(n,"class","component-title"),g(i,"class","description"),g(v,"class","plot"),g(e,"class","component")},m(_,h){se(_,e,h),c(e,n),c(n,r),c(n,a),c(e,s),c(e,i),c(i,u),c(i,f),c(i,l),c(e,o),c(e,v),E(),c(e,w)},p(_,h){t=_,d!==t[50]&&(k(),d=t[50],E())},d(_){_&&A(e),k()}}}function vo(t){let e,n,r="Data Zones Distribution (vs. UK average)",a,s,i="Histogram shows the number of data zones distributed across different household social economic factors.",u,f,l=`<div class="badge-container"><img class="badge" src="${fo}"/> <img class="badge" src="${Tr}"/> <img class="badge" src="${po}"/></div>`,o=t[47],v,p,d,w,E,k,_,h,x,z="Density plot refers to UK distribution while the scattered points refer to data zones in the local authority.",V,C,T="",U,O,M,S=`<div class="badge-container"><img class="badge" src="${lo}"/> <img class="badge" src="${ho}"/> <img class="badge" src="${Tr}"/></div>`;const R=()=>t[30](f,o),P=()=>t[30](null,o),Y=()=>t[31](C,o),q=()=>t[31](null,o),tt=()=>t[32](M,o),it=()=>t[32](null,o);return{c(){e=y("div"),n=y("h3"),n.textContent=r,a=L(),s=y("p"),s.textContent=i,u=L(),f=y("div"),f.innerHTML=l,v=L(),p=y("div"),d=y("div"),w=y("h3"),E=K("Co-benefits Recieved by Data Zones across "),k=K(t[47]),_=K(" Values"),h=L(),x=y("p"),x.textContent=z,V=L(),C=y("div"),C.innerHTML=T,U=L(),O=y("div"),M=y("div"),M.innerHTML=S,this.h()},l(W){e=b(W,"DIV",{class:!0});var j=B(e);n=b(j,"H3",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-1d86f13"&&(n.textContent=r),a=D(j),s=b(j,"P",{class:!0,"data-svelte-h":!0}),H(s)!=="svelte-vl6og1"&&(s.textContent=i),u=D(j),f=b(j,"DIV",{class:!0,"data-svelte-h":!0}),H(f)!=="svelte-1obds0n"&&(f.innerHTML=l),j.forEach(A),v=D(W),p=b(W,"DIV",{class:!0});var dt=B(p);d=b(dt,"DIV",{});var $=B(d);w=b($,"H3",{class:!0});var yt=B(w);E=X(yt,"Co-benefits Recieved by Data Zones across "),k=X(yt,t[47]),_=X(yt," Values"),yt.forEach(A),h=D($),x=b($,"P",{class:!0,"data-svelte-h":!0}),H(x)!=="svelte-mjnso4"&&(x.textContent=z),V=D($),C=b($,"DIV",{class:!0,"data-svelte-h":!0}),H(C)!=="svelte-1kzougf"&&(C.innerHTML=T),$.forEach(A),U=D(dt),O=b(dt,"DIV",{});var Et=B(O);M=b(Et,"DIV",{class:!0,"data-svelte-h":!0}),H(M)!=="svelte-1piy8ha"&&(M.innerHTML=S),Et.forEach(A),dt.forEach(A),this.h()},h(){g(n,"class","component-title"),g(s,"class","description short"),g(f,"class","plot"),g(e,"class","component"),g(w,"class","component-title"),g(x,"class","description short"),g(C,"class","plot"),g(M,"class","plot"),g(p,"class","component")},m(W,j){se(W,e,j),c(e,n),c(e,a),c(e,s),c(e,u),c(e,f),R(),se(W,v,j),se(W,p,j),c(p,d),c(d,w),c(w,E),c(w,k),c(w,_),c(d,h),c(d,x),c(d,V),c(d,C),Y(),c(p,U),c(p,O),c(O,M),tt()},p(W,j){t=W,o!==t[47]&&(P(),o=t[47],R()),o!==t[47]&&(q(),o=t[47],Y()),o!==t[47]&&(it(),o=t[47],tt())},d(W){W&&(A(e),A(v),A(p)),P(),q(),it()}}}function mo(t){let e,n,r="",a=t[47];const s=()=>t[29](n,a),i=()=>t[29](null,a);return{c(){e=y("div"),n=y("div"),n.innerHTML=r,this.h()},l(u){e=b(u,"DIV",{class:!0});var f=B(e);n=b(f,"DIV",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-1shkadq"&&(n.innerHTML=r),f.forEach(A),this.h()},h(){g(n,"class","plot"),g(e,"class","component")},m(u,f){se(u,e,f),c(e,n),s()},p(u,f){t=u,a!==t[47]&&(i(),a=t[47],s())},d(u){u&&A(e),i()}}}function Pr(t){let e,n,r,a,s,i;function u(o,v){return o[11]?mo:vo}let f=u(t),l=f(t);return{c(){e=y("div"),n=y("h2"),r=K(t[47]),a=L(),s=y("div"),l.c(),i=L(),this.h()},l(o){e=b(o,"DIV",{});var v=B(e);n=b(v,"H2",{});var p=B(n);r=X(p,t[47]),p.forEach(A),a=D(v),s=b(v,"DIV",{class:!0});var d=B(s);l.l(d),d.forEach(A),i=D(v),v.forEach(A),this.h()},h(){g(s,"class","row")},m(o,v){se(o,e,v),c(e,n),c(n,r),c(e,a),c(e,s),l.m(s,null),c(e,i)},p(o,v){f===(f=u(o))&&l?l.p(o,v):(l.d(1),l=f(o),l&&(l.c(),l.m(s,null)))},d(o){o&&A(e),l.d()}}}function go(t){let e,n,r,a="Data Report",s,i,u=t[15][t[14]]+"",f,l,o,v="Explore how this local authority will benefit from achieving Net Zero and general factors of their households.",p,d,w,E='<p class="section-subtitle">Overview</p> <h2 class="section-title">How much co-benefit values would this area recieve?</h2> <p class="description">We calculate and model 11 types of co-benefits across five different pathyways suggested by Climate Change Committee in the Sixth Carbon Budget from 2025-2050 on the level of data zones across UK.</p>',k,_,h,x,z="Total Co-benefits Values Across Five Pathways (vs. UK Average)",V,C,T,U=t[15][t[14]]+"",O,M,S,R,P,Y,q,tt="Barchart",it,W,j,dt,$,yt="Boxplot",Et,Me,bt,Ee,_t,He="Distribution",Le,ht,Re=`<div class="badge-container"><img class="badge" src="${co}"/></div>`,Ne,m,N,lt,oe="11 Types of Co-Benefits Values (vs. UK Average)",G,pt,De,ct=t[15][t[14]]+"",at,ie,Ae,Ct,an="",ze,vt,Ot,Wn=t[15][t[14]]+"",on,ln,cn,Ut,Yn="Scroll for zooming in and out.",un,wt,Zn="",fn,Lt,qt,Kn='<p class="section-subtitle">Breakdown</p> <h2 class="section-title">How would the co-benefit results vary if we take different pathways?</h2> <p class="description">We break down the modeled co-benefit values in different pathways towards achieving Net Zero. All Results are compared with the average value across all local authorities in UK.</p>',dn,xt,mt,jt,Xn="Five Pathways and their 11 Co-benefits",hn,Wt,Gn="Scroll for zooming in and out.",pn,le,vn,mn,ut,Yt,Qn='<p class="section-subtitle">Temporal Trends</p> <h2 class="section-title">How co-benefits change over time?</h2> <p class="description">Detailed breakdown of temporal trends for total co-benefits, types of co-benefits, and five pathways.</p>',gn,Dt,Zt,Jn="Total Co-benefits Distribution from 2025-2050 (vs. UK Average)",yn,ce,At,$n="",bn,zt,Kt,tr="11 Types of Co-benefits Distribution Following Balance Pathway from 2025-2050",_n,ue,fe,Tt,er="",Cn,It,Xt,nr="Total Co-benefits Distribution Across Five Scenarios from 2025-2050",wn,de,Vt,rr=`<div class="badge-container"><img class="badge" src="${io}"/></div>`,xn,Bt,et,Gt,sr="Households",kn,Qt,ar="Social Economic Factors of Households",Mn,Jt,or="We describe the distribution of household economic factors aggregated on the data zone level and the different level of co-benefits recieved by those data zones.",En,$t,Ln,te,ir="Aggregate Plots",Dn,Pt,An,lr,he=Xe(Fn),Q=[];for(let F=0;F<he.length;F+=1)Q[F]=Br(Vr(t,he,F));let pe=Xe(On),J=[];for(let F=0;F<pe.length;F+=1)J[F]=Pr(Ir(t,pe,F));return{c(){e=y("div"),n=y("div"),r=y("p"),r.textContent=a,s=L(),i=y("h1"),f=K(u),l=L(),o=y("p"),o.textContent=v,p=L(),d=y("div"),w=y("div"),w.innerHTML=E,k=L(),_=y("div"),h=y("div"),x=y("h3"),x.textContent=z,V=L(),C=y("p"),T=K("Aggregated values from 2025-2050 in "),O=K(U),M=K(" verus average value of benefits recieved across all local authorities in UK."),S=L(),R=y("div"),P=y("input"),Y=L(),q=y("label"),q.textContent=tt,it=y("br"),W=L(),j=y("input"),dt=L(),$=y("label"),$.textContent=yt,Et=y("br"),Me=L(),bt=y("input"),Ee=L(),_t=y("label"),_t.textContent=He,Le=L(),ht=y("div"),ht.innerHTML=Re,m=L(),N=y("div"),lt=y("h3"),lt.textContent=oe,G=L(),pt=y("p"),De=K("Co-benefits values in "),at=K(ct),ie=K(" verus average value across all local authorities in UK."),Ae=L(),Ct=y("div"),Ct.innerHTML=an,ze=L(),vt=y("div"),Ot=y("h3"),on=K(Wn),ln=K(" on UK Map"),cn=L(),Ut=y("p"),Ut.textContent=Yn,un=L(),wt=y("div"),wt.innerHTML=Zn,fn=L(),Lt=y("div"),qt=y("div"),qt.innerHTML=Kn,dn=L(),xt=y("div"),mt=y("div"),jt=y("h3"),jt.textContent=Xn,hn=L(),Wt=y("p"),Wt.textContent=Gn,pn=L(),le=y("div"),vn=L();for(let F=0;F<Q.length;F+=1)Q[F].c();mn=L(),ut=y("div"),Yt=y("div"),Yt.innerHTML=Qn,gn=L(),Dt=y("div"),Zt=y("h3"),Zt.textContent=Jn,yn=L(),ce=y("div"),At=y("div"),At.innerHTML=$n,bn=L(),zt=y("div"),Kt=y("h3"),Kt.textContent=tr,_n=L(),ue=y("div"),fe=y("div"),Tt=y("div"),Tt.innerHTML=er,Cn=L(),It=y("div"),Xt=y("h3"),Xt.textContent=nr,wn=L(),de=y("div"),Vt=y("div"),Vt.innerHTML=rr,xn=L(),Bt=y("div"),et=y("div"),Gt=y("p"),Gt.textContent=sr,kn=L(),Qt=y("h2"),Qt.textContent=ar,Mn=L(),Jt=y("p"),Jt.textContent=or,En=L(),$t=y("input"),Ln=L(),te=y("label"),te.textContent=ir,Dn=L(),Pt=y("div");for(let F=0;F<J.length;F+=1)J[F].c();this.h()},l(F){e=b(F,"DIV",{class:!0});var Z=B(e);n=b(Z,"DIV",{class:!0});var I=B(n);r=b(I,"P",{class:!0,"data-svelte-h":!0}),H(r)!=="svelte-1gxb8h1"&&(r.textContent=a),s=D(I),i=b(I,"H1",{class:!0});var Ht=B(i);f=X(Ht,u),Ht.forEach(A),l=D(I),o=b(I,"P",{class:!0,"data-svelte-h":!0}),H(o)!=="svelte-5qj0r2"&&(o.textContent=v),I.forEach(A),p=D(Z),d=b(Z,"DIV",{class:!0});var Se=B(d);w=b(Se,"DIV",{class:!0,"data-svelte-h":!0}),H(w)!=="svelte-42ok6n"&&(w.innerHTML=E),k=D(Se),_=b(Se,"DIV",{id:!0,class:!0});var ve=B(_);h=b(ve,"DIV",{class:!0});var Rt=B(h);x=b(Rt,"H3",{class:!0,"data-svelte-h":!0}),H(x)!=="svelte-ov02fv"&&(x.textContent=z),V=D(Rt),C=b(Rt,"P",{class:!0});var Fe=B(C);T=X(Fe,"Aggregated values from 2025-2050 in "),O=X(Fe,U),M=X(Fe," verus average value of benefits recieved across all local authorities in UK."),Fe.forEach(A),S=D(Rt),R=b(Rt,"DIV",{class:!0});var nt=B(R);P=b(nt,"INPUT",{type:!0,name:!0}),Y=D(nt),q=b(nt,"LABEL",{for:!0,"data-svelte-h":!0}),H(q)!=="svelte-1hwbt9c"&&(q.textContent=tt),it=b(nt,"BR",{}),W=D(nt),j=b(nt,"INPUT",{type:!0,name:!0}),dt=D(nt),$=b(nt,"LABEL",{for:!0,"data-svelte-h":!0}),H($)!=="svelte-1bcp6t5"&&($.textContent=yt),Et=b(nt,"BR",{}),Me=D(nt),bt=b(nt,"INPUT",{type:!0,name:!0}),Ee=D(nt),_t=b(nt,"LABEL",{for:!0,"data-svelte-h":!0}),H(_t)!=="svelte-27dm33"&&(_t.textContent=He),nt.forEach(A),Le=D(Rt),ht=b(Rt,"DIV",{class:!0,"data-svelte-h":!0}),H(ht)!=="svelte-1o1ebxf"&&(ht.innerHTML=Re),Rt.forEach(A),m=D(ve),N=b(ve,"DIV",{class:!0});var me=B(N);lt=b(me,"H3",{class:!0,"data-svelte-h":!0}),H(lt)!=="svelte-1o9zf4n"&&(lt.textContent=oe),G=D(me),pt=b(me,"P",{class:!0});var Oe=B(pt);De=X(Oe,"Co-benefits values in "),at=X(Oe,ct),ie=X(Oe," verus average value across all local authorities in UK."),Oe.forEach(A),Ae=D(me),Ct=b(me,"DIV",{class:!0,"data-svelte-h":!0}),H(Ct)!=="svelte-11dzfub"&&(Ct.innerHTML=an),me.forEach(A),ze=D(ve),vt=b(ve,"DIV",{class:!0});var ge=B(vt);Ot=b(ge,"H3",{class:!0});var zn=B(Ot);on=X(zn,Wn),ln=X(zn," on UK Map"),zn.forEach(A),cn=D(ge),Ut=b(ge,"P",{class:!0,"data-svelte-h":!0}),H(Ut)!=="svelte-1ask2se"&&(Ut.textContent=Yn),un=D(ge),wt=b(ge,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),H(wt)!=="svelte-ipahrb"&&(wt.innerHTML=Zn),ge.forEach(A),ve.forEach(A),Se.forEach(A),fn=D(Z),Lt=b(Z,"DIV",{class:!0});var Ue=B(Lt);qt=b(Ue,"DIV",{class:!0,"data-svelte-h":!0}),H(qt)!=="svelte-kw1tcg"&&(qt.innerHTML=Kn),dn=D(Ue),xt=b(Ue,"DIV",{class:!0});var qe=B(xt);mt=b(qe,"DIV",{class:!0});var ye=B(mt);jt=b(ye,"H3",{class:!0,"data-svelte-h":!0}),H(jt)!=="svelte-dq9uga"&&(jt.textContent=Xn),hn=D(ye),Wt=b(ye,"P",{class:!0,"data-svelte-h":!0}),H(Wt)!=="svelte-1ask2se"&&(Wt.textContent=Gn),pn=D(ye),le=b(ye,"DIV",{class:!0}),B(le).forEach(A),ye.forEach(A),vn=D(qe);for(let ee=0;ee<Q.length;ee+=1)Q[ee].l(qe);qe.forEach(A),Ue.forEach(A),mn=D(Z),ut=b(Z,"DIV",{class:!0});var Nt=B(ut);Yt=b(Nt,"DIV",{class:!0,"data-svelte-h":!0}),H(Yt)!=="svelte-1ttf9zc"&&(Yt.innerHTML=Qn),gn=D(Nt),Dt=b(Nt,"DIV",{class:!0});var je=B(Dt);Zt=b(je,"H3",{class:!0,"data-svelte-h":!0}),H(Zt)!=="svelte-td9req"&&(Zt.textContent=Jn),yn=D(je),ce=b(je,"DIV",{class:!0});var cr=B(ce);At=b(cr,"DIV",{class:!0,"data-svelte-h":!0}),H(At)!=="svelte-1qyf5p7"&&(At.innerHTML=$n),cr.forEach(A),je.forEach(A),bn=D(Nt),zt=b(Nt,"DIV",{class:!0});var We=B(zt);Kt=b(We,"H3",{class:!0,"data-svelte-h":!0}),H(Kt)!=="svelte-i61rsm"&&(Kt.textContent=tr),_n=D(We),ue=b(We,"DIV",{class:!0});var ur=B(ue);fe=b(ur,"DIV",{class:!0});var fr=B(fe);Tt=b(fr,"DIV",{class:!0,"data-svelte-h":!0}),H(Tt)!=="svelte-mdtmv3"&&(Tt.innerHTML=er),fr.forEach(A),ur.forEach(A),We.forEach(A),Cn=D(Nt),It=b(Nt,"DIV",{class:!0});var Ye=B(It);Xt=b(Ye,"H3",{class:!0,"data-svelte-h":!0}),H(Xt)!=="svelte-z821kd"&&(Xt.textContent=nr),wn=D(Ye),de=b(Ye,"DIV",{class:!0});var dr=B(de);Vt=b(dr,"DIV",{class:!0,"data-svelte-h":!0}),H(Vt)!=="svelte-1cmh3ws"&&(Vt.innerHTML=rr),dr.forEach(A),Ye.forEach(A),Nt.forEach(A),xn=D(Z),Bt=b(Z,"DIV",{class:!0});var Ze=B(Bt);et=b(Ze,"DIV",{class:!0});var gt=B(et);Gt=b(gt,"P",{class:!0,"data-svelte-h":!0}),H(Gt)!=="svelte-ceroz1"&&(Gt.textContent=sr),kn=D(gt),Qt=b(gt,"H2",{class:!0,"data-svelte-h":!0}),H(Qt)!=="svelte-so6kne"&&(Qt.textContent=ar),Mn=D(gt),Jt=b(gt,"P",{class:!0,"data-svelte-h":!0}),H(Jt)!=="svelte-ep3r6m"&&(Jt.textContent=or),En=D(gt),$t=b(gt,"INPUT",{type:!0}),Ln=D(gt),te=b(gt,"LABEL",{for:!0,"data-svelte-h":!0}),H(te)!=="svelte-1kwkdzm"&&(te.textContent=ir),gt.forEach(A),Dn=D(Ze),Pt=b(Ze,"DIV",{id:!0,class:!0});var hr=B(Pt);for(let ee=0;ee<J.length;ee+=1)J[ee].l(hr);hr.forEach(A),Ze.forEach(A),Z.forEach(A),this.h()},h(){g(r,"class","page-subtitle"),g(i,"class","page-title"),g(o,"class","description"),g(n,"class","section header"),g(w,"class","section-header"),g(x,"class","component-title"),g(C,"class","description"),g(P,"type","radio"),g(P,"name","visType"),P.value="barchart",P.checked=!0,g(q,"for","html"),g(j,"type","radio"),g(j,"name","visType"),j.value="boxplot",g($,"for","css"),g(bt,"type","radio"),g(bt,"name","visType"),bt.value="distribution",g(_t,"for","javascript"),g(R,"class","radio-set"),g(ht,"class","plot"),g(h,"class","component column"),is(()=>t[20].call(h)),g(lt,"class","component-title"),g(pt,"class","description"),g(Ct,"class","plot"),g(N,"class","component column"),g(Ot,"class","component-title"),g(Ut,"class","description"),g(wt,"id","map"),g(wt,"class","svelte-wd9p4b"),g(vt,"class","component column"),g(_,"id","vis-block"),g(_,"class","svelte-wd9p4b"),g(d,"class","section"),g(qt,"class","section-header"),g(jt,"class","component-title"),g(Wt,"class","description"),g(le,"class","plot"),g(mt,"class","component"),g(xt,"class","row"),g(Lt,"class","section"),g(Yt,"class","section-header"),g(Zt,"class","component-title"),g(At,"class","plot"),g(ce,"class","row"),g(Dt,"class","component singlevis"),g(Kt,"class","component-title"),g(Tt,"class","plot"),g(fe,"class","row"),g(ue,"class","row"),g(zt,"class","component singlevis"),g(Xt,"class","component-title"),g(Vt,"class","plot"),g(de,"class","row"),g(It,"class","component singlevis"),g(ut,"class","section"),g(Gt,"class","section-subtitle"),g(Qt,"class","section-title"),g(Jt,"class","description"),g($t,"type","checkbox"),g(te,"for","checkbox"),g(et,"class","section-header"),g(Pt,"id","multiple-comp"),g(Pt,"class","svelte-wd9p4b"),g(Bt,"class","section"),g(e,"class","page-container")},m(F,Z){se(F,e,Z),c(e,n),c(n,r),c(n,s),c(n,i),c(i,f),c(n,l),c(n,o),c(e,p),c(e,d),c(d,w),c(d,k),c(d,_),c(_,h),c(h,x),c(h,V),c(h,C),c(C,T),c(C,O),c(C,M),c(h,S),c(h,R),c(R,P),c(R,Y),c(R,q),c(R,it),c(R,W),c(R,j),c(R,dt),c(R,$),c(R,Et),c(R,Me),c(R,bt),c(R,Ee),c(R,_t),c(h,Le),c(h,ht),t[19](ht),Ne=ds(h,t[20].bind(h)),c(_,m),c(_,N),c(N,lt),c(N,G),c(N,pt),c(pt,De),c(pt,at),c(pt,ie),c(N,Ae),c(N,Ct),t[21](Ct),c(_,ze),c(_,vt),c(vt,Ot),c(Ot,on),c(Ot,ln),c(vt,cn),c(vt,Ut),c(vt,un),c(vt,wt),t[22](wt),c(e,fn),c(e,Lt),c(Lt,qt),c(Lt,dn),c(Lt,xt),c(xt,mt),c(mt,jt),c(mt,hn),c(mt,Wt),c(mt,pn),c(mt,le),t[23](le),c(xt,vn);for(let I=0;I<Q.length;I+=1)Q[I]&&Q[I].m(xt,null);c(e,mn),c(e,ut),c(ut,Yt),c(ut,gn),c(ut,Dt),c(Dt,Zt),c(Dt,yn),c(Dt,ce),c(ce,At),t[25](At),c(ut,bn),c(ut,zt),c(zt,Kt),c(zt,_n),c(zt,ue),c(ue,fe),c(fe,Tt),t[26](Tt),c(ut,Cn),c(ut,It),c(It,Xt),c(It,wn),c(It,de),c(de,Vt),t[27](Vt),c(e,xn),c(e,Bt),c(Bt,et),c(et,Gt),c(et,kn),c(et,Qt),c(et,Mn),c(et,Jt),c(et,En),c(et,$t),$t.checked=t[11],c(et,Ln),c(et,te),c(Bt,Dn),c(Bt,Pt);for(let I=0;I<J.length;I+=1)J[I]&&J[I].m(Pt,null);t[33](e),An||(lr=[Ke(P,"change",t[16]),Ke(j,"change",t[16]),Ke(bt,"change",t[16]),Ke($t,"change",t[28])],An=!0)},p(F,Z){if(Z[0]&512){he=Xe(Fn);let I;for(I=0;I<he.length;I+=1){const Ht=Vr(F,he,I);Q[I]?Q[I].p(Ht,Z):(Q[I]=Br(Ht),Q[I].c(),Q[I].m(xt,null))}for(;I<Q.length;I+=1)Q[I].d(1);Q.length=he.length}if(Z[0]&2048&&($t.checked=F[11]),Z[0]&2496){pe=Xe(On);let I;for(I=0;I<pe.length;I+=1){const Ht=Ir(F,pe,I);J[I]?J[I].p(Ht,Z):(J[I]=Pr(Ht),J[I].c(),J[I].m(Pt,null))}for(;I<J.length;I+=1)J[I].d(1);J.length=pe.length}},i:pr,o:pr,d(F){F&&A(e),t[19](null),Ne(),t[21](null),t[22](null),t[23](null),vr(Q,F),t[25](null),t[26](null),t[27](null),vr(J,F),t[33](null),An=!1,ls(lr)}}}function Mt(t){const e=t.querySelector("figure");e&&e.remove();const n=t.querySelector("svg");n&&n.remove()}function yo(t,e,n){let r,a,s,i,u,f,l,o={},v={},p={},d={},w="barchart",E=!1,k=300,{data:_}=e;const h=_.LAD,x=_.oneLADData,z=_.oneLADAllCBs,V=_.totalCBAllZones;_.totalCBAllZones;const C=_.allCBAllLAD,T=_.totalCBAllLAD,U=_.LADToName;let O,M;cs(()=>{O=new qs(h,"LAD",M,"val",!0),O.initMap()});function S(){console.log("RENDER"),w=="boxplot"?a?.append(rt({height:k/1.4,...st,x:{type:"band"},style:{fontSize:"18px"},marks:[Ha(x,{y:"total",x:"scenario",tip:!0}),Un(V,ft({y:"median"},{y:"total",x:"scenario",stroke:"blue",strokeWidth:2})),Un(V,ft({y:"mean"},{y:"total",x:"scenario",stroke:"red",strokeWidth:2}))]})):w=="barchart"?a?.append(rt({height:k/1.4,...st,x:{type:"band"},style:{fontSize:"18px"},marks:[re(T,ft({y:"mean"},{y:"val",x:"scenario",fill:"lightblue",opacity:.7,dx:20})),re(x,ft({y:"sum"},{y:"total",x:"scenario",tip:!0}))]})):w=="distribution"&&a?.append(rt({height:k/1.4,...st,y:{label:"Datazones Frequency"},style:{fontSize:"18px"},facet:{data:V,y:"scenario"},marks:[Qe(x,Pn({y:"count"},{x:"total",tip:!0})),qr(V,In({x:"median"},{x:"total",y1:0,y2:1500,fy:"scenario",stroke:"blue",strokeWidth:3}))]}))}function R(){s?.append(rt({height:k,MARGINS:st,x:{type:"band"},marks:[re(z,ft({y:"sum"},{y:"total",x:"co_benefit_type",tip:!0}))]}))}function P(){On.forEach(m=>{let N;E?(Cr.includes(m)?N=rt({height:k/3,width:500*2,...st,style:{fontSize:"18px"},color:{legend:!0,scheme:"greys"},x:{domain:Zr(0,6),ticks:new Set(x.map(G=>G[m]))},marks:[Je(x,ft({fill:"count"},{x:m,stroke:"black"})),Je([Math.floor(Ie(V.map(G=>G[m])))],{x:G=>G,stroke:"red",fill:null,strokeWidth:2})]}):N=rt({height:k/3,width:500*2,...st,style:{fontSize:"18px"},color:{legend:!0},marks:[Nn(x,{x:m,tip:!0}),Nn([Ie(x.map(G=>G[m]))],{stroke:"blue",strokeWidth:2}),Nn([Ie(V.map(G=>G[m]))],{stroke:"red",strokeWidth:2})]}),o[m]?.append(N)):(Cr.includes(m)?N=rt({height:k/2,width:500,...st,marginLeft:100,x:{grid:!0,label:m,tickFormat:G=>Math.floor(G)},style:{fontSize:"18px"},color:{legend:!0},marks:[re(V,Ar(ft({y:"count"},{x:m,dx:20,fill:Te}))),re(x,Ar(ft({y:"count"},{x:m})))]}):N=rt({height:k/2,...st,style:{fontSize:"18px"},marks:[Qe(x,Pn({y:"proportion"},{x:m,tip:!0,fill:Te,stroke:Te,fillOpacity:.2,strokeWidth:3})),Qe(V,Pn({y:"proportion"},{x:m,tip:!0,fill:"black",stroke:"black",fillOpacity:.2,strokeWidth:3}))]}),v[m]?.append(void 0),o[m]?.append(N));let oe=rt({height:k/2,...st,style:{fontSize:"18px"},color:{range:["rgb(227, 248, 255)","lightblue"]},marks:[Fa(js(V,3e4),{x:m,y:"total",fill:"density",thresholds:10}),$r(x,{x:m,y:"total",fill:"black",r:2}),Ga(x,{x:m,y:"total"}),Os(),Us({anchor:"bottom"})]});p[m]?.append(oe)})}function Y(){i?.append(rt({...st,marginLeft:100,height:k,width:300,grid:!0,color:{type:"linear",scheme:"greys",legend:!0},marks:[Je(C,_r({fill:"mean"},{x:"scenario",y:"co_benefit_type",fill:"val",stroke:"black",dx:Bn/2,dy:-Bn/2,inset:.5})),Je(z,_r({fill:"mean"},{x:"scenario",y:"co_benefit_type",fill:"total",stroke:"black",inset:.5}))]}))}function q(){for(let m of Fn){let N=rt({height:k,width:410,...st,marginRight:0,marginLeft:100,marks:[xr(C,In({x:"mean"},{x:"val",y:"co_benefit_type",dy:-Bn/2,fill:Te,tip:!0})),xr(z,In({x:"mean"},{x:"total",y:"co_benefit_type",tip:!0}))]});d[m]?.append(N)}}function tt(){let m=x.flatMap(ct=>Vn.map(at=>({time:at,value:ct[at],scenario:ct.scenario,zone:"local"}))),N=V.flatMap(ct=>Vn.map(at=>({time:at,value:ct[at],scenario:ct.scenario,zone:"UK"}))),lt=m.concat(N);console.log(lt[20]);let oe=rt({height:k,width:800,...st,paddingLeft:200,marginRight:0,x:{tickSize:0,label:null,ticks:[]},color:{range:[Ws,Te]},marks:[re(lt,ft({y:"mean"},{x:"zone",y:"value",fx:"time",tip:!0,fill:"zone"}))]});u?.append(oe),St(u).select("g[aria-label='bar']").selectAll("g").each(function(ct,at){const ie=St(this).selectAll("rect").nodes()[0],Ae=St(ie).attr("transform")||"";St(ie).attr("transform",`${Ae} translate(-20, 0)`),St(this).selectAll("rect").nodes()[0].getAttribute("height"),St(this).selectAll("rect").nodes()[1].getAttribute("height"),St(this).selectAll("rect").each(function(an,ze){ze==0&&St(this).raise()})});let G=rt({height:k,width:800,...st,paddingLeft:200,marginRight:0,color:{legend:!0},marks:[La(lt,ft({y:"mean"},{x:"time",y:"value",tip:!0,stroke:"scenario"}))]});f?.append(G);let pt=z.flatMap(ct=>Vn.map(at=>({time:at,value:ct[at],cobenefit:ct.co_benefit_type}))),De=rt({height:k,width:1e3,...st,paddingLeft:200,marginRight:0,insetLeft:10,insetRight:10,insetBottom:30,style:{fontSize:"10px"},y:{tickFormat:".2f",label:"Value (Â£)"},x:{label:"Year"},color:{legend:!0,range:Ys,domain:Zs},marks:[Qe(pt,ft({y:"mean"},{x:"time",y:"value",tip:!0,fill:"cobenefit"})),br([0],{strokeWidth:8,stroke:"white",opacity:1,strokeLinecap:"round"}),br([0],{strokeWidth:2,stroke:"#333333",opacity:1,strokeLinecap:"round"})]});l?.append(De)}function it(m){n(18,w=m.currentTarget.value)}function W(m){ot[m?"unshift":"push"](()=>{a=m,n(0,a)})}function j(){k=this.clientHeight,n(12,k)}function dt(m){ot[m?"unshift":"push"](()=>{s=m,n(1,s)})}function $(m){ot[m?"unshift":"push"](()=>{M=m,n(13,M)})}function yt(m){ot[m?"unshift":"push"](()=>{i=m,n(2,i)})}function Et(m,N){ot[m?"unshift":"push"](()=>{d[N]=m,n(9,d)})}function Me(m){ot[m?"unshift":"push"](()=>{u=m,n(3,u)})}function bt(m){ot[m?"unshift":"push"](()=>{l=m,n(5,l)})}function Ee(m){ot[m?"unshift":"push"](()=>{f=m,n(4,f)})}function _t(){E=this.checked,n(11,E)}function He(m,N){ot[m?"unshift":"push"](()=>{o[N]=m,n(6,o)})}function Le(m,N){ot[m?"unshift":"push"](()=>{o[N]=m,n(6,o)})}function ht(m,N){ot[m?"unshift":"push"](()=>{v[N]=m,n(7,v)})}function Re(m,N){ot[m?"unshift":"push"](()=>{p[N]=m,n(8,p)})}function Ne(m){ot[m?"unshift":"push"](()=>{r=m,n(10,r)})}return t.$$set=m=>{"data"in m&&n(17,_=m.data)},t.$$.update=()=>{t.$$.dirty[0]&262203&&(a&&(console.log("REM"),Mt(a)),s&&Mt(s),u&&Mt(u),f&&Mt(f),l&&Mt(l),S(),R(),tt()),t.$$.dirty[0]&448&&(Object.values(o).forEach(m=>{m&&Mt(m)}),Object.values(v).forEach(m=>{m&&Mt(m)}),Object.values(p).forEach(m=>{m&&Mt(m)}),P()),t.$$.dirty[0]&516&&(i?.firstChild?.remove(),Object.values(d).forEach(m=>{m&&Mt(m)}),Y(),q())},[a,s,i,u,f,l,o,v,p,d,r,E,k,M,h,U,it,_,w,W,j,dt,$,yt,Et,Me,bt,Ee,_t,He,Le,ht,Re,Ne]}class Lo extends us{constructor(e){super(),fs(this,e,yo,go,os,{data:17},null,[-1,-1])}}export{Lo as component};
