import{s as Fe,a as S,e as i,g as A,c,b as I,p as w,f as _,q as t,x as ue,i as te,h as a,y as Q,z as ke,v as Me,A as fe,w as De,t as xe,d as Be,n as Ue,B as Ve,C as Ie}from"../chunks/scheduler.GkBzG_tJ.js";import{S as Pe,i as Oe,c as we,b as He,m as Ge,t as Re,a as je,d as qe}from"../chunks/index.puHNmHGV.js";import{N as ze,e as de}from"../chunks/NavigationBar.Bg68QGmS.js";import{i as Ke,o as Ye}from"../chunks/transform.BNP73y-7.js";import"../chunks/index.CHZ6sWj5.js";import{M as Je}from"../chunks/mapUK.XchZVyeM.js";import{g as ne,d as Ce,e as Ee,f as Ze,h as Qe,i as We}from"../chunks/duckdb.CiHXljN7.js";import{C as ve,S as ye,a as Xe,b as be,c as $e,d as et,g as Ne}from"../chunks/globals.CkQUNe_5.js";function Le(u,e,l){const n=u.slice();return n[31]=e[l],n}function Se(u,e,l){const n=u.slice();return n[28]=e[l],n}function tt(u){let e,l,n="Social Economic Factor",h,b,L=de(be),o=[];for(let d=0;d<L.length;d+=1)o[d]=Ae(Le(u,L,d));return{c(){e=i("div"),l=i("h2"),l.textContent=n,h=S(),b=i("div");for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=c(d,"DIV",{class:!0});var f=I(e);l=c(f,"H2",{"data-svelte-h":!0}),w(l)!=="svelte-1ld89ev"&&(l.textContent=n),h=A(f),b=c(f,"DIV",{id:!0,class:!0});var s=I(b);for(let v=0;v<o.length;v+=1)o[v].l(s);s.forEach(_),f.forEach(_),this.h()},h(){t(b,"id","time"),t(b,"class","svelte-1fc578l"),t(e,"class","tabcontent svelte-1fc578l")},m(d,f){te(d,e,f),a(e,l),a(e,h),a(e,b);for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(b,null)},p(d,f){if(f[0]&514){L=de(be);let s;for(s=0;s<L.length;s+=1){const v=Le(d,L,s);o[s]?o[s].p(v,f):(o[s]=Ae(v),o[s].c(),o[s].m(b,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=L.length}},d(d){d&&_(e),De(o,d)}}}function lt(u){let e,l,n,h="Co-Benefits",b,L,o,d,f="Time",s,v,k,D,M,C="Total",T,g,F,R,P="2025-2029",j,N,z,K,H="2030-2034",ae,Y,x,r,E="2035-2039",V,W,J,O,re="2040-2044",ee,le,X,q,oe="2045-2049",ie,ce,Z=de(ve.concat({id:"total",label:"Total"})),m=[];for(let p=0;p<Z.length;p+=1)m[p]=Te(Se(u,Z,p));return{c(){e=i("div"),l=i("div"),n=i("h2"),n.textContent=h,b=S();for(let p=0;p<m.length;p+=1)m[p].c();L=S(),o=i("div"),d=i("h2"),d.textContent=f,s=S(),v=i("div"),k=i("label"),D=i("input"),M=i("span"),M.textContent=C,T=S(),g=i("label"),F=i("input"),R=i("span"),R.textContent=P,j=S(),N=i("label"),z=i("input"),K=i("span"),K.textContent=H,ae=S(),Y=i("label"),x=i("input"),r=i("span"),r.textContent=E,V=S(),W=i("label"),J=i("input"),O=i("span"),O.textContent=re,ee=S(),le=i("label"),X=i("input"),q=i("span"),q.textContent=oe,this.h()},l(p){e=c(p,"DIV",{class:!0});var B=I(e);l=c(B,"DIV",{class:!0});var y=I(l);n=c(y,"H2",{"data-svelte-h":!0}),w(n)!=="svelte-uglilz"&&(n.textContent=h),b=A(y);for(let ge=0;ge<m.length;ge+=1)m[ge].l(y);y.forEach(_),L=A(B),o=c(B,"DIV",{class:!0});var G=I(o);d=c(G,"H2",{"data-svelte-h":!0}),w(d)!=="svelte-hletp"&&(d.textContent=f),s=A(G),v=c(G,"DIV",{id:!0,class:!0});var U=I(v);k=c(U,"LABEL",{class:!0});var se=I(k);D=c(se,"INPUT",{type:!0,name:!0,class:!0}),M=c(se,"SPAN",{class:!0,"data-svelte-h":!0}),w(M)!=="svelte-2fqrek"&&(M.textContent=C),se.forEach(_),T=A(U),g=c(U,"LABEL",{class:!0});var $=I(g);F=c($,"INPUT",{type:!0,name:!0,class:!0}),R=c($,"SPAN",{class:!0,"data-svelte-h":!0}),w(R)!=="svelte-177152l"&&(R.textContent=P),$.forEach(_),j=A(U),N=c(U,"LABEL",{class:!0});var pe=I(N);z=c(pe,"INPUT",{type:!0,name:!0,class:!0}),K=c(pe,"SPAN",{class:!0,"data-svelte-h":!0}),w(K)!=="svelte-sne3j9"&&(K.textContent=H),pe.forEach(_),ae=A(U),Y=c(U,"LABEL",{class:!0});var he=I(Y);x=c(he,"INPUT",{type:!0,name:!0,class:!0}),r=c(he,"SPAN",{class:!0,"data-svelte-h":!0}),w(r)!=="svelte-13ifhof"&&(r.textContent=E),he.forEach(_),V=A(U),W=c(U,"LABEL",{class:!0});var me=I(W);J=c(me,"INPUT",{type:!0,name:!0,class:!0}),O=c(me,"SPAN",{class:!0,"data-svelte-h":!0}),w(O)!=="svelte-1pug1mv"&&(O.textContent=re),me.forEach(_),ee=A(U),le=c(U,"LABEL",{class:!0});var _e=I(le);X=c(_e,"INPUT",{type:!0,name:!0,class:!0}),q=c(_e,"SPAN",{class:!0,"data-svelte-h":!0}),w(q)!=="svelte-3f05xd"&&(q.textContent=oe),_e.forEach(_),U.forEach(_),G.forEach(_),B.forEach(_),this.h()},h(){t(l,"class","component"),t(D,"type","radio"),t(D,"name","toggle"),D.value="total",D.checked=!0,t(D,"class","svelte-1fc578l"),t(M,"class","svelte-1fc578l"),t(k,"class","time-radio svelte-1fc578l"),t(F,"type","radio"),t(F,"name","toggle"),F.value="Y2025_2029",t(F,"class","svelte-1fc578l"),t(R,"class","svelte-1fc578l"),t(g,"class","time-radio svelte-1fc578l"),t(z,"type","radio"),t(z,"name","toggle"),z.value="Y2030_2034",t(z,"class","svelte-1fc578l"),t(K,"class","svelte-1fc578l"),t(N,"class","time-radio svelte-1fc578l"),t(x,"type","radio"),t(x,"name","toggle"),x.value="Y2035_2039",t(x,"class","svelte-1fc578l"),t(r,"class","svelte-1fc578l"),t(Y,"class","time-radio svelte-1fc578l"),t(J,"type","radio"),t(J,"name","toggle"),J.value="Y2040_2044",t(J,"class","svelte-1fc578l"),t(O,"class","svelte-1fc578l"),t(W,"class","time-radio svelte-1fc578l"),t(X,"type","radio"),t(X,"name","toggle"),X.value="Y2045_2049",t(X,"class","svelte-1fc578l"),t(q,"class","svelte-1fc578l"),t(le,"class","time-radio svelte-1fc578l"),t(v,"id","time"),t(v,"class","svelte-1fc578l"),t(o,"class","component"),t(e,"class","tabcontent svelte-1fc578l")},m(p,B){te(p,e,B),a(e,l),a(l,n),a(l,b);for(let y=0;y<m.length;y+=1)m[y]&&m[y].m(l,null);a(e,L),a(e,o),a(o,d),a(o,s),a(o,v),a(v,k),a(k,D),a(k,M),a(v,T),a(v,g),a(g,F),a(g,R),a(v,j),a(v,N),a(N,z),a(N,K),a(v,ae),a(v,Y),a(Y,x),a(Y,r),a(v,V),a(v,W),a(W,J),a(W,O),a(v,ee),a(v,le),a(le,X),a(le,q),ie||(ce=[Q(D,"change",u[7]),Q(F,"change",u[7]),Q(z,"change",u[7]),Q(x,"change",u[7]),Q(J,"change",u[7]),Q(X,"change",u[7])],ie=!0)},p(p,B){if(B[0]&64){Z=de(ve.concat({id:"total",label:"Total"}));let y;for(y=0;y<Z.length;y+=1){const G=Se(p,Z,y);m[y]?m[y].p(G,B):(m[y]=Te(G),m[y].c(),m[y].m(l,null))}for(;y<m.length;y+=1)m[y].d(1);m.length=Z.length}},d(p){p&&_(e),De(m,p),ie=!1,ke(ce)}}}function Ae(u){let e,l,n,h,b=u[31].label+"",L,o,d,f;return{c(){e=i("input"),n=S(),h=i("label"),L=xe(b),o=i("br"),this.h()},l(s){e=c(s,"INPUT",{type:!0,id:!0,name:!0,class:!0}),n=A(s),h=c(s,"LABEL",{for:!0});var v=I(h);L=Be(v,b),v.forEach(_),o=c(s,"BR",{}),this.h()},h(){t(e,"type","radio"),t(e,"id","html"),t(e,"name","fav_language"),e.value=u[31].id,e.checked=l=u[31].id==u[1],t(e,"class","svelte-1fc578l"),t(h,"for","html")},m(s,v){te(s,e,v),te(s,n,v),te(s,h,v),a(h,L),te(s,o,v),d||(f=Q(e,"change",u[9]),d=!0)},p(s,v){v[0]&2&&l!==(l=s[31].id==s[1])&&(e.checked=l)},d(s){s&&(_(e),_(n),_(h),_(o)),d=!1,f()}}}function at(u){let e,l;return{c(){e=i("img"),this.h()},l(n){e=c(n,"IMG",{style:!0,class:!0,src:!0}),this.h()},h(){Ve(e,"opacity","0"),t(e,"class","icon svelte-1fc578l"),Ie(e.src,l=Ne("Air quality"))||t(e,"src",l)},m(n,h){te(n,e,h)},d(n){n&&_(e)}}}function st(u){let e,l;return{c(){e=i("img"),this.h()},l(n){e=c(n,"IMG",{alt:!0,class:!0,src:!0}),this.h()},h(){t(e,"alt","cobenefit icon"),t(e,"class","icon svelte-1fc578l"),Ie(e.src,l=Ne(u[28].id))||t(e,"src",l)},m(n,h){te(n,e,h)},d(n){n&&_(e)}}}function Te(u){let e,l,n,h,b,L=u[28].label+"",o,d,f,s,v,k;function D(T,g){return T[28].id!="total"?st:at}let C=D(u)(u);return{c(){e=i("div"),C.c(),l=S(),n=i("input"),h=S(),b=i("label"),o=xe(L),d=S(),f=i("br"),s=S(),this.h()},l(T){e=c(T,"DIV",{class:!0});var g=I(e);C.l(g),l=A(g),n=c(g,"INPUT",{type:!0,name:!0}),h=A(g),b=c(g,"LABEL",{for:!0});var F=I(b);o=Be(F,L),F.forEach(_),d=A(g),f=c(g,"BR",{}),s=A(g),g.forEach(_),this.h()},h(){t(n,"type","radio"),t(n,"name","cobenef"),n.value=u[28].id,n.checked=!0,t(b,"for","css"),t(e,"class","checkbox-div svelte-1fc578l")},m(T,g){te(T,e,g),C.m(e,null),a(e,l),a(e,n),a(e,h),a(e,b),a(b,o),a(e,d),a(e,f),a(e,s),v||(k=Q(n,"change",u[6]),v=!0)},p:Ue,d(T){T&&_(e),C.d(),v=!1,k()}}}function nt(u){let e,l,n,h,b=`<h2>MapUK</h2> <p>This interactive map allows to explore both the co-benefit values and the socio-economic factors at the local
            authorities and datazones levels.</p>`,L,o,d,f,s="",v,k,D="",M,C,T="Export",g,F,R,P,j,N,z="CoBenefits",K,H,ae=`Socio-Economic
                    Factors`,Y,x,r,E,V,W="Local Authorities",J,O,re,ee,le="Data Zones",X,q,oe,ie;e=new ze({});function ce(p,B){if(p[0]=="Cobenefit")return lt;if(p[0]=="SEF")return tt}let Z=ce(u),m=Z&&Z(u);return{c(){we(e.$$.fragment),l=S(),n=i("div"),h=i("div"),h.innerHTML=b,L=S(),o=i("div"),d=i("div"),f=i("div"),f.innerHTML=s,v=S(),k=i("div"),k.innerHTML=D,M=S(),C=i("button"),C.textContent=T,g=S(),F=i("div"),R=S(),P=i("div"),j=i("div"),N=i("button"),N.textContent=z,K=S(),H=i("button"),H.textContent=ae,Y=S(),x=i("div"),r=i("input"),E=S(),V=i("label"),V.textContent=W,J=S(),O=i("input"),re=S(),ee=i("label"),ee.textContent=le,X=S(),m&&m.c(),this.h()},l(p){He(e.$$.fragment,p),l=A(p),n=c(p,"DIV",{class:!0});var B=I(n);h=c(B,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),w(h)!=="svelte-1bpnvd7"&&(h.innerHTML=b),L=A(B),o=c(B,"DIV",{id:!0,class:!0});var y=I(o);d=c(y,"DIV",{class:!0,id:!0});var G=I(d);f=c(G,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),w(f)!=="svelte-1ej9vmv"&&(f.innerHTML=s),v=A(G),k=c(G,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),w(k)!=="svelte-1j653gg"&&(k.innerHTML=D),M=A(G),C=c(G,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),w(C)!=="svelte-zgluur"&&(C.textContent=T),g=A(G),F=c(G,"DIV",{id:!0,class:!0}),I(F).forEach(_),G.forEach(_),R=A(y),P=c(y,"DIV",{class:!0,id:!0});var U=I(P);j=c(U,"DIV",{class:!0});var se=I(j);N=c(se,"BUTTON",{class:!0,"data-svelte-h":!0}),w(N)!=="svelte-14nmzoo"&&(N.textContent=z),K=A(se),H=c(se,"BUTTON",{class:!0,"data-svelte-h":!0}),w(H)!=="svelte-xxvynj"&&(H.textContent=ae),se.forEach(_),Y=A(U),x=c(U,"DIV",{class:!0});var $=I(x);r=c($,"INPUT",{type:!0,name:!0}),E=A($),V=c($,"LABEL",{for:!0,"data-svelte-h":!0}),w(V)!=="svelte-p8irzv"&&(V.textContent=W),J=A($),O=c($,"INPUT",{type:!0,name:!0}),re=A($),ee=c($,"LABEL",{for:!0,"data-svelte-h":!0}),w(ee)!=="svelte-1ytveqc"&&(ee.textContent=le),$.forEach(_),X=A(U),m&&m.l(U),U.forEach(_),y.forEach(_),B.forEach(_),this.h()},h(){t(h,"class","component"),t(h,"id","heaser"),t(f,"id","map"),t(f,"class","svelte-1fc578l"),t(k,"id","map-legend"),t(k,"class","svelte-1fc578l"),t(C,"id","export-button"),t(C,"class","svelte-1fc578l"),t(F,"id","tooltip"),t(F,"class","tooltip svelte-1fc578l"),t(d,"class","component column svelte-1fc578l"),t(d,"id","mapComp"),t(N,"class","tablinks svelte-1fc578l"),N.value="Cobenefit",ue(N,"active",u[0]=="Cobenefit"),t(H,"class","tablinks svelte-1fc578l"),H.value="SEF",ue(H,"active",u[0]=="SEF"),t(j,"class","tab svelte-1fc578l"),t(r,"type","radio"),t(r,"name","granularity"),r.value="LAD",r.checked=!0,t(V,"for","LAD"),t(O,"type","radio"),t(O,"name","granularity"),O.value="LSOA",t(ee,"for","LSOA"),t(x,"class","component"),t(P,"class","component column svelte-1fc578l"),t(P,"id","control-panel"),t(o,"id","map-row"),t(o,"class","row svelte-1fc578l"),t(n,"class","page-container svelte-1fc578l")},m(p,B){Ge(e,p,B),te(p,l,B),te(p,n,B),a(n,h),a(n,L),a(n,o),a(o,d),a(d,f),u[19](f),a(d,v),a(d,k),u[20](k),a(d,M),a(d,C),u[21](C),a(d,g),a(d,F),a(o,R),a(o,P),a(P,j),a(j,N),a(j,K),a(j,H),a(P,Y),a(P,x),a(x,r),a(x,E),a(x,V),a(x,J),a(x,O),a(x,re),a(x,ee),a(P,X),m&&m.m(P,null),u[22](n),q=!0,oe||(ie=[Q(C,"click",rt),Q(N,"click",u[8]),Q(H,"click",u[8]),Q(r,"change",u[10]),Q(O,"change",u[10])],oe=!0)},p(p,B){(!q||B[0]&1)&&ue(N,"active",p[0]=="Cobenefit"),(!q||B[0]&1)&&ue(H,"active",p[0]=="SEF"),Z===(Z=ce(p))&&m?m.p(p,B):(m&&m.d(1),m=Z&&Z(p),m&&(m.c(),m.m(P,null)))},i(p){q||(Re(e.$$.fragment,p),q=!0)},o(p){je(e.$$.fragment,p),q=!1},d(p){p&&(_(l),_(n)),qe(e,p),u[19](null),u[20](null),u[21](null),m&&m.d(),u[22](null),oe=!1,ke(ie)}}}function rt(){const e=document.getElementsByClassName("maplibregl-canvas")[0].toDataURL("image/png");var l=document.createElement("a");l.download="map.png",l.href=e,l.dataset.downloadurl=["image/png",l.download,l.href].join(":"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function ot(u,e,l){let{data:n}=e,h,b,L,o,d,f,s="Cobenefit",v=!1,k="BNZ",D=ve.map(r=>r.id),M="total",C="LAD",T="EPC",g;function F(){if(f.makeColorScale(!1),s=="SEF"&&ye.includes(T)){const r=Ke("black","white");let E=Object.values($e[T]);const V=E.map((J,O)=>r(O/(E.length-1)));let W=Ye().domain(E).range(V);f.setColorScale(W)}L=f.legend(R()),l(4,o.innerHTML="",o),o.append(L)}function R(){if(s=="SEF")return`${be.filter(r=>r.id==T)[0].label} (${et(T)})`;if(s=="Cobenefit")return"Cobenefits (Â£ per capita)"}Me(async()=>{let r;C=="LAD"?r=await ne(Ce(Array.from(D),"UK",M)):C=="LSOA"&&(r=await ne(Ee(Array.from(D),k,M))),r.forEach(E=>{E.value_per_capita=E.value_per_capita*1e6}),l(12,f=new Je(r,C,b,"value_per_capita",!0,"Lookup_Value",!0)),f.initMap(),L=f.legend(R()),o.append(L)});const P=r=>{const E=r.currentTarget.value;E=="total"?l(15,D=ve.map(V=>V.id)):l(15,D=[E])},j=r=>{const E=r.currentTarget.value;l(16,M=E)};function N(r,E){l(0,s=r.currentTarget.value)}const z=r=>{l(1,T=r.currentTarget.value)},K=r=>{f.removeLayers(),f.removeSources(),l(17,C=r.currentTarget.value),l(12,f.granularity=C,f),C=="LSOA"?l(12,f.border=!1,f):l(12,f.border=!0,f),l(13,v=!0)};function H(r){fe[r?"unshift":"push"](()=>{b=r,l(3,b)})}function ae(r){fe[r?"unshift":"push"](()=>{o=r,l(4,o)})}function Y(r){fe[r?"unshift":"push"](()=>{d=r,l(5,d)})}function x(r){fe[r?"unshift":"push"](()=>{h=r,l(2,h)})}return u.$$set=r=>{"data"in r&&l(11,n=r.data)},u.$$.update=()=>{u.$$.dirty[0]&520195&&f?.loaded&&(s=="Cobenefit"?(l(12,f.dataKey="value_per_capita",f),C=="LAD"?l(18,g=ne(Ce(Array.from(D),"UK",M))):C=="LSOA"&&l(18,g=ne(Ee(Array.from(D),k,M)))):l(0,s="SEF")&&(l(12,f.dataKey="val",f),C=="LAD"?ye.includes(T)?l(18,g=ne(Ze(T))):l(18,g=ne(Qe(T))):C=="LSOA"&&l(18,g=ne(We(T)))),g.then(r=>{s=="Cobenefit"&&r.forEach(V=>{V.value_per_capita=V.value_per_capita*1e6});let E;s=="Cobenefit"?D.length==1?(E=JSON.parse(JSON.stringify(Xe(D[0]))),E.shift(),E=E.reverse()):E=["red","white","black"]:E=["white","black"],f.update(r,s,v,E),F(),l(13,v=!1)}))},[s,T,h,b,o,d,P,j,N,z,K,n,f,v,k,D,M,C,g,H,ae,Y,x]}class mt extends Pe{constructor(e){super(),Oe(this,e,ot,nt,Fe,{data:11},null,[-1,-1])}}export{mt as component};
